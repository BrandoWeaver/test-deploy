<template>
  <!-- <button @click="handleClick">Subscribe</button> -->
  <div class="w-full bg-white pb-8">
    <!-- Outer Container for Centered Header -->
    <div class="w-full max-w-[1440px] mx-auto px-6">
      <!-- Section Header -->
      <div class="flex justify-between items-center mb-4">
        <h2
          class="font-bold text-lg text-black border-b border-transparent hover:border-black transition-all duration-300 leading-[25px] py-[4px]"
        >
          From this series
        </h2>

        <div class="flex gap-2">
          <!-- Left Navigation Button -->
          <button
            class="nav-button"
            @click="scrollLeft"
            aria-label="Scroll Left"
          >
            <svg
              width="12"
              height="12"
              viewBox="0 0 12 12"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.69316 11.1738L6.13456 11.7324C5.88066 11.9609 5.4998 11.9609 5.27128 11.7324L0.320109 6.80664C0.0915937 6.55273 0.0915937 6.17188 0.320109 5.94336L5.27128 0.992188C5.4998 0.763672 5.88066 0.763672 6.13456 0.992188L6.69316 1.55078C6.92167 1.80469 6.92167 2.18555 6.69316 2.43945L3.62089 5.35938H10.908C11.2635 5.35938 11.5174 5.61328 11.5174 5.96875V6.78125C11.5174 7.11133 11.2635 7.39062 10.908 7.39062H3.62089L6.69316 10.2852C6.92167 10.5391 6.94706 10.9199 6.69316 11.1738Z"
                fill="black"
              />
            </svg>
          </button>
          <!-- Right Navigation Button -->
          <button
            class="nav-button"
            @click="scrollRight"
            aria-label="Scroll Right"
          >
            <svg
              width="12"
              height="12"
              viewBox="0 0 12 12"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.30684 0.826172L5.86544 0.267578C6.11934 0.0390625 6.5002 0.0390625 6.72872 0.267578L11.6799 5.19336C11.9084 5.44727 11.9084 5.82812 11.6799 6.05664L6.72872 11.0078C6.5002 11.2363 6.11934 11.2363 5.86544 11.0078L5.30684 10.4492C5.07833 10.1953 5.07833 9.81445 5.30684 9.56055L8.37911 6.64062H1.092C0.736531 6.64062 0.482625 6.38672 0.482625 6.03125V5.21875C0.482625 4.88867 0.736531 4.60938 1.092 4.60938H8.37911L5.30684 1.71484C5.07833 1.46094 5.05294 1.08008 5.30684 0.826172Z"
                fill="black"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Scrollable Product Cards (Full Screen Width) -->
    <div
      ref="carousel"
      class="relative justify-center w-full flex overflow-x-auto no-scrollbar gap-4 px-8 xl-max:px-6 xl-max:gap-[12px] lg-max:gap-[10px]"
    >
      <div
        v-for="(item, index) in listImageSeries?.data"
        :key="index"
        class="product-card group flex flex-col justify-between w-[300px] h-[200px] bg-[#F5F5F5] rounded-lg p-1"
        @mouseenter="playVideo(index)"
        @mouseleave="pauseVideo(index)"
      >
        <NuxtLink
          :to="`/all-products/${item.section.slug}/${item.sub_section.slug}/${item.categories[0].slug}/${item.collections[0].slug}/${item.slug}`"
          class="relative"
        >
          <div
            class="absolute top-0 flex-shrink flex-col gap-[4px] opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          >
            <!-- AI Label and Title -->
            <div class="flex items-center gap-[2px]">
              <!-- AI Label -->
              <div
                v-if="item.ai_generate"
                class="flex items-center px-2 py-1 bg-[rgba(0,0,0,0.5)] text-white rounded-[2px]"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="11"
                  height="12"
                  viewBox="0 0 7 7"
                  fill="none"
                >
                  <g clip-path="url(#clip0_1739_68804)">
                    <path
                      d="M5.84951 2.06083C5.57387 2.06083 5.30952 1.94489 5.11461 1.73852C4.9197 1.53214 4.8102 1.25224 4.8102 0.960382C4.8102 0.814453 4.75545 0.674501 4.658 0.571314C4.56054 0.468126 4.42836 0.410156 4.29054 0.410156C4.15272 0.410156 4.02054 0.468126 3.92309 0.571314C3.82564 0.674501 3.77089 0.814453 3.77089 0.960382C3.77089 1.25224 3.66139 1.53214 3.46648 1.73852C3.27157 1.94489 3.00721 2.06083 2.73157 2.06083C2.59375 2.06083 2.46157 2.1188 2.36412 2.22199C2.26666 2.32518 2.21191 2.46513 2.21191 2.61106C2.21191 2.75699 2.26666 2.89694 2.36412 3.00013C2.46157 3.10331 2.59375 3.16128 2.73157 3.16128C3.00721 3.16128 3.27157 3.27722 3.46648 3.4836C3.66139 3.68997 3.77089 3.96988 3.77089 4.26173C3.77089 4.40766 3.82564 4.54761 3.92309 4.6508C4.02054 4.75399 4.15272 4.81196 4.29054 4.81196C4.42836 4.81196 4.56054 4.75399 4.658 4.6508C4.75545 4.54761 4.8102 4.40766 4.8102 4.26173C4.8102 3.96988 4.9197 3.68997 5.11461 3.4836C5.30952 3.27722 5.57387 3.16128 5.84951 3.16128C5.98734 3.16128 6.11951 3.10331 6.21697 3.00013C6.31442 2.89694 6.36917 2.75699 6.36917 2.61106C6.36917 2.46513 6.31442 2.32518 6.21697 2.22199C6.11951 2.1188 5.98734 2.06083 5.84951 2.06083Z"
                      fill="white"
                    />
                    <path
                      d="M2.63976 4.75103C2.47762 4.75103 2.32212 4.68662 2.20747 4.57196C2.09281 4.45731 2.0284 4.30181 2.0284 4.13967C2.0284 4.05859 1.9962 3.98084 1.93887 3.92352C1.88155 3.86619 1.80379 3.83398 1.72272 3.83398C1.64165 3.83398 1.5639 3.86619 1.50657 3.92352C1.44925 3.98084 1.41704 4.05859 1.41704 4.13967C1.41704 4.30181 1.35263 4.45731 1.23798 4.57196C1.12333 4.68662 0.967824 4.75103 0.805681 4.75103C0.724609 4.75103 0.646858 4.78323 0.589532 4.84056C0.532205 4.89788 0.5 4.97564 0.5 5.05671C0.5 5.13778 0.532205 5.21553 0.589532 5.27286C0.646858 5.33018 0.724609 5.36239 0.805681 5.36239C0.967824 5.36239 1.12333 5.4268 1.23798 5.54145C1.35263 5.6561 1.41704 5.81161 1.41704 5.97375C1.41704 6.05482 1.44925 6.13257 1.50657 6.1899C1.5639 6.24722 1.64165 6.27943 1.72272 6.27943C1.80379 6.27943 1.88155 6.24722 1.93887 6.1899C1.9962 6.13257 2.0284 6.05482 2.0284 5.97375C2.0284 5.81161 2.09281 5.6561 2.20747 5.54145C2.32212 5.4268 2.47762 5.36239 2.63976 5.36239C2.72084 5.36239 2.79859 5.33018 2.85591 5.27286C2.91324 5.21553 2.94545 5.13778 2.94545 5.05671C2.94545 4.97564 2.91324 4.89788 2.85591 4.84056C2.79859 4.78323 2.72084 4.75103 2.63976 4.75103Z"
                      fill="white"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_1739_68804">
                      <rect
                        width="5.86907"
                        height="5.86907"
                        fill="white"
                        transform="translate(0.5 0.410156)"
                      />
                    </clipPath>
                  </defs>
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="11"
                  height="12"
                  viewBox="0 0 8 7"
                  fill="none"
                >
                  <path
                    d="M6.2041 6.27924V0.410156H7.37792V6.27924H6.2041Z"
                    fill="white"
                  />
                  <path
                    d="M0.369141 6.27924L2.24883 0.410156H3.62886L5.50855 6.27924H4.27922L3.43851 3.22573C3.26403 2.61503 3.09747 1.93294 2.93092 1.30638H2.89919C2.74057 1.94088 2.57401 2.61503 2.39953 3.22573L1.55882 6.27924H0.369141ZM1.53503 4.77231V3.86816H4.32681V4.77231H1.53503Z"
                    fill="white"
                  />
                </svg>
              </div>
              <!-- Title -->
              <span
                class="px-2 py-1 text-[10px] font-bold text-white bg-[rgba(0,0,0,0.5)] rounded-[2px] lin"
              >
                {{ item.title }}
              </span>
            </div>

            <!-- Author Label -->
            <span
              class="px-2 py-1 text-[8px] font-normal text-white bg-[rgba(0,0,0,0.5)] rounded-[2px]"
            >
              {{ item.creator.name.toUpperCase() }}
            </span>
          </div>
          <div class="w-[300px] h-[190px] bg-[#f6f5f3]">
            <NuxtImg
              :src="item.thumbnail || ''"
              class="w-[300px] h-[190px] object-contain"
              v-if="item.file_video === null"
            />
            <video
              v-else
              :ref="(el: any) => (videoRefs[index] = el as HTMLVideoElement)"
              :src="item.file_video"
              class="w-full h-full object-cover rounded"
              preload="metadata"
              :muted="isMuted[index] ?? true"
              playsinline
              :poster="''"
              @loadedmetadata="(e: any) => logDuration(e, index)"
            ></video>
          </div>
          <!-- Bottom Section -->
          <div
            class="absolute bottom-0 w-full flex justify-between opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          >
            <div
              class="flex items-center gap-[2px]"
              :class="{
                invisible: item.section.id !== 4,
              }"
            >
              <div
                class="flex h-[19px] items-center px-[4px] py-[3px] bg-[rgba(0,0,0,0.5)] rounded"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="11"
                  height="12"
                  viewBox="0 0 9 9"
                  fill="none"
                >
                  <g clip-path="url(#clip0_1739_68847)">
                    <rect
                      x="0.5"
                      y="1.31445"
                      width="0.666667"
                      height="10.6807"
                      rx="0.333333"
                      transform="rotate(-45 0.5 1.31445)"
                      fill="white"
                    />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M2.36202 2.5098H2.16667C1.72486 2.51051 1.30134 2.68633 0.988934 2.99874C0.676526 3.31115 0.500705 3.73466 0.5 4.17647V5.5098C0.500705 5.95161 0.676526 6.37513 0.988934 6.68754C1.30134 6.99994 1.72486 7.17576 2.16667 7.17647H2.58867C3.19168 8.01306 4.09316 8.58588 5.10667 8.77647C5.12654 8.78035 5.14675 8.78225 5.167 8.78214C5.25541 8.78214 5.34019 8.74702 5.4027 8.6845C5.46521 8.62199 5.50033 8.53721 5.50033 8.4488V5.64812L4.83333 4.98112V8.02147C4.09813 7.7871 3.46596 7.30688 3.043 6.66147C3.01278 6.61498 2.97144 6.57676 2.92272 6.55028C2.874 6.52379 2.81945 6.50988 2.764 6.5098H2.16667C1.90145 6.5098 1.6471 6.40445 1.45956 6.21691C1.27202 6.02937 1.16667 5.77502 1.16667 5.5098V4.17647C1.16667 3.91125 1.27202 3.6569 1.45956 3.46936C1.6471 3.28183 1.90145 3.17647 2.16667 3.17647H2.76667C2.82206 3.17646 2.87657 3.16265 2.92528 3.13629C2.93877 3.12899 2.9517 3.12079 2.96398 3.11177L2.36202 2.5098ZM4.83333 3.81266V1.6648C4.32676 1.82689 3.86928 2.10578 3.49566 2.47499L3.02285 2.00218C3.58931 1.44183 4.31371 1.05878 5.10667 0.909803C5.15481 0.900942 5.20432 0.902794 5.25167 0.91523C5.29902 0.927665 5.34305 0.950377 5.38063 0.981752C5.41821 1.01313 5.44842 1.05239 5.46911 1.09676C5.4898 1.14113 5.50046 1.18951 5.50033 1.23847V4.47966L4.83333 3.81266ZM5.96788 6.11567C5.9641 6.13598 5.9622 6.15665 5.96224 6.17741C5.96232 6.22128 5.97104 6.26472 5.9879 6.30522C6.00476 6.34573 6.02944 6.38252 6.06052 6.41349C6.12328 6.47603 6.20833 6.51108 6.29694 6.51093C6.3173 6.51089 6.33757 6.50899 6.3575 6.50528L5.96788 6.11567ZM6.91685 5.89618L6.41348 5.39281C6.47932 5.21876 6.514 5.03266 6.514 4.84299C6.514 4.43126 6.3506 4.03635 6.05968 3.74499C6.02871 3.71391 6.00417 3.67704 5.98745 3.63647C5.97073 3.5959 5.96216 3.55244 5.96224 3.50857C5.96232 3.46469 5.97104 3.42126 5.9879 3.38075C6.00476 3.34025 6.02944 3.30346 6.06052 3.27249C6.09159 3.24152 6.12847 3.21698 6.16904 3.20026C6.2096 3.18354 6.25306 3.17497 6.29694 3.17505C6.34081 3.17513 6.38424 3.18385 6.42475 3.20071C6.46526 3.21757 6.50205 3.24224 6.53302 3.27332C6.94879 3.6899 7.1823 4.25442 7.1823 4.84299C7.1823 5.21394 7.08954 5.57535 6.91685 5.89618ZM6.89448 7.04227C6.8758 7.08442 6.86589 7.13039 6.86589 7.17739C6.86589 7.26584 6.90102 7.35067 6.96357 7.41322C7.02612 7.47577 7.11095 7.51091 7.1994 7.51091C7.2464 7.51091 7.29237 7.50099 7.33452 7.48231L6.89448 7.04227ZM7.88508 6.86441L7.40209 6.38142C7.68056 5.92125 7.83128 5.38999 7.83128 4.84322C7.83128 4.05648 7.51922 3.30186 6.96357 2.74489C6.9326 2.71392 6.90803 2.67715 6.89127 2.63669C6.87451 2.59622 6.86589 2.55285 6.86589 2.50906C6.86589 2.46526 6.87451 2.42189 6.89127 2.38142C6.90803 2.34096 6.9326 2.30419 6.96357 2.27322C6.99454 2.24225 7.03131 2.21769 7.07177 2.20092C7.11224 2.18416 7.1556 2.17554 7.1994 2.17554C7.2432 2.17554 7.28657 2.18416 7.32703 2.20092C7.3675 2.21769 7.40427 2.24225 7.43524 2.27322C8.11583 2.95537 8.49805 3.87962 8.49805 4.84322C8.49805 5.56796 8.28183 6.27045 7.88508 6.86441Z"
                      fill="white"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_1739_68847">
                      <rect
                        width="8"
                        height="8"
                        fill="white"
                        transform="translate(0.5 0.84375)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </div>
              <!-- Duration -->
              <span
                class="px-[4px] py-[2px] text-[10px] text-white bg-[rgba(0,0,0,0.5)] rounded"
              >
                {{ formatTime(durations[index]) }}
              </span>
            </div>

            <!-- Right: Price and Actions -->
            <div class="flex flex-col justify-end items-end gap-2">
              <!-- Price Section -->
              <div
                v-if="item.on_sale"
                class="flex items-center h-[18px] justify-between gap-[3px] px-[4px] py-[2px] bg-[rgba(0,0,0,0.5)] rounded text-white"
              >
                <div class="line-through text-[8px] text-white/70">
                  ${{ item.price }}
                </div>
                <div class="font-bold text-[12px]">${{ item.dis_price }}</div>
              </div>

              <!-- Action Buttons -->
              <div
                class="flex h-[19px] gap-[2px] opacity-0 group-hover:opacity-100 transition-opacity duration-300"
              >
                <button
                  class="px-[4px] py-[4px] bg-[rgba(0,0,0,0.5)] rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="11"
                    height="12"
                    viewBox="0 0 9 9"
                    fill="none"
                  >
                    <g clip-path="url(#clip0_1739_68821)">
                      <path
                        d="M7.99484 4.00258L4.49984 6.09992L1.00484 4.00258C0.929029 3.9571 0.838258 3.94359 0.752491 3.96503C0.666725 3.98647 0.592988 4.04111 0.547504 4.11692C0.502019 4.19272 0.488512 4.28349 0.509954 4.36926C0.531395 4.45503 0.586029 4.52876 0.661837 4.57425L4.3285 6.77425C4.38035 6.8054 4.43969 6.82185 4.50017 6.82185C4.56065 6.82185 4.61999 6.8054 4.67184 6.77425L8.33851 4.57425C8.41431 4.52876 8.46895 4.45503 8.49039 4.36926C8.51183 4.28349 8.49832 4.19272 8.45284 4.11692C8.40735 4.04111 8.33362 3.98647 8.24785 3.96503C8.16208 3.94359 8.07131 3.9571 7.9955 4.00258H7.99484Z"
                        fill="white"
                      />
                      <path
                        d="M7.99484 5.52407L4.49984 7.62107L1.00484 5.52407C0.9673 5.50154 0.925695 5.48664 0.882398 5.48019C0.8391 5.47375 0.794958 5.4759 0.75249 5.48652C0.710023 5.49713 0.670063 5.51601 0.634891 5.54207C0.599719 5.56813 0.570024 5.60086 0.547503 5.6384C0.524981 5.67594 0.510073 5.71754 0.50363 5.76084C0.497187 5.80414 0.499336 5.84828 0.509953 5.89075C0.531394 5.97651 0.586028 6.05025 0.661836 6.09573L4.3285 8.29574C4.38035 8.32689 4.43969 8.34335 4.50017 8.34335C4.56065 8.34335 4.61999 8.32689 4.67184 8.29574L8.3385 6.09573C8.41431 6.05025 8.46895 5.97651 8.49039 5.89075C8.51183 5.80498 8.49832 5.71421 8.45284 5.6384C8.40735 5.56259 8.33362 5.50796 8.24785 5.48652C8.16208 5.46507 8.07131 5.47858 7.9955 5.52407H7.99484Z"
                        fill="white"
                      />
                      <path
                        d="M4.49989 5.26843C4.32009 5.26833 4.14369 5.21936 3.98956 5.12676L0.661561 3.12976C0.612277 3.10013 0.571498 3.05825 0.543188 3.00819C0.514878 2.95813 0.5 2.9016 0.5 2.84409C0.5 2.78659 0.514878 2.73006 0.543188 2.68C0.571498 2.62994 0.612277 2.58806 0.661561 2.55843L3.98956 0.561427C4.14369 0.468837 4.3201 0.419922 4.49989 0.419922C4.67969 0.419922 4.8561 0.468837 5.01023 0.561427L8.33823 2.55843C8.38751 2.58806 8.42829 2.62994 8.4566 2.68C8.48491 2.73006 8.49979 2.78659 8.49979 2.84409C8.49979 2.9016 8.48491 2.95813 8.4566 3.00819C8.42829 3.05825 8.38751 3.10013 8.33823 3.12976L5.01023 5.12676C4.8561 5.21936 4.6797 5.26833 4.49989 5.26843ZM1.48123 2.84409L4.33323 4.55509C4.3836 4.58523 4.4412 4.60114 4.49989 4.60114C4.55859 4.60114 4.61619 4.58523 4.66656 4.55509L7.51856 2.84409L4.66656 1.13309C4.61619 1.10296 4.55859 1.08705 4.49989 1.08705C4.4412 1.08705 4.3836 1.10296 4.33323 1.13309L1.48123 2.84409Z"
                        fill="white"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_1739_68821">
                        <rect
                          width="8"
                          height="8"
                          fill="white"
                          transform="translate(0.5 0.34375)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
                <button
                  class="px-[4px] py-[4px] bg-[rgba(0,0,0,0.5)] rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="11"
                    height="12"
                    viewBox="0 0 9 9"
                    fill="none"
                  >
                    <g clip-path="url(#clip0_1739_68826)">
                      <path
                        d="M5.83333 5.3444C5.83333 5.43281 5.79821 5.51759 5.7357 5.5801C5.67319 5.64261 5.58841 5.67773 5.5 5.67773H4.83333V6.3444C4.83333 6.43281 4.79821 6.51759 4.7357 6.5801C4.67319 6.64262 4.58841 6.67773 4.5 6.67773C4.41159 6.67773 4.32681 6.64262 4.2643 6.5801C4.20179 6.51759 4.16667 6.43281 4.16667 6.3444V5.67773H3.5C3.41159 5.67773 3.32681 5.64261 3.2643 5.5801C3.20179 5.51759 3.16667 5.43281 3.16667 5.3444C3.16667 5.256 3.20179 5.17121 3.2643 5.1087C3.32681 5.04619 3.41159 5.01107 3.5 5.01107H4.16667V4.3444C4.16667 4.256 4.20179 4.17121 4.2643 4.1087C4.32681 4.04619 4.41159 4.01107 4.5 4.01107C4.58841 4.01107 4.67319 4.04619 4.7357 4.1087C4.79821 4.17121 4.83333 4.256 4.83333 4.3444V5.01107H5.5C5.58841 5.01107 5.67319 5.04619 5.7357 5.1087C5.79821 5.17121 5.83333 5.256 5.83333 5.3444ZM8.5 3.01107V6.3444C8.49947 6.78627 8.32371 7.20988 8.01126 7.52233C7.69881 7.83477 7.2752 8.01054 6.83333 8.01107H2.16667C1.7248 8.01054 1.30119 7.83477 0.98874 7.52233C0.676294 7.20988 0.500529 6.78627 0.5 6.3444L0.5 2.3444C0.500529 1.90254 0.676294 1.47892 0.98874 1.16647C1.30119 0.854028 1.7248 0.678264 2.16667 0.677734H3.00933C3.16447 0.677863 3.31746 0.713916 3.45633 0.783068L4.50833 1.31107C4.55482 1.33338 4.60578 1.34478 4.65733 1.3444H6.83333C7.2752 1.34493 7.69881 1.52069 8.01126 1.83314C8.32371 2.14559 8.49947 2.5692 8.5 3.01107ZM1.16667 2.3444V2.67773H7.772C7.70331 2.48343 7.57626 2.3151 7.40823 2.19576C7.24021 2.07643 7.03942 2.01192 6.83333 2.01107H4.65733C4.5022 2.01094 4.3492 1.97489 4.21033 1.90573L3.15833 1.3794C3.11199 1.35652 3.06102 1.34454 3.00933 1.3444H2.16667C1.90145 1.3444 1.6471 1.44976 1.45956 1.63729C1.27202 1.82483 1.16667 2.07918 1.16667 2.3444ZM7.83333 6.3444V3.3444H1.16667V6.3444C1.16667 6.60962 1.27202 6.86397 1.45956 7.05151C1.6471 7.23904 1.90145 7.3444 2.16667 7.3444H6.83333C7.09855 7.3444 7.3529 7.23904 7.54044 7.05151C7.72798 6.86397 7.83333 6.60962 7.83333 6.3444Z"
                        fill="white"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_1739_68826">
                        <rect
                          width="8"
                          height="8"
                          fill="white"
                          transform="translate(0.5 0.34375)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
                <button
                  class="px-[4px] py-[4px] bg-[rgba(0,0,0,0.5)] rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="11"
                    height="12"
                    viewBox="0 0 8 9"
                    fill="none"
                  >
                    <g clip-path="url(#clip0_1739_68767)">
                      <path
                        d="M6.13867 8.34375C6.03508 8.34341 5.93259 8.31864 5.83709 8.27087C5.7416 8.22309 5.655 8.15327 5.58231 8.06542L3.86031 6.02742L2.13831 8.06675C2.02772 8.20033 1.88589 8.29114 1.7313 8.32735C1.57672 8.36356 1.41657 8.34349 1.27171 8.26975C1.12541 8.1997 1.00026 8.07876 0.912596 7.92272C0.824932 7.76668 0.778829 7.5828 0.780308 7.39508V2.01042C0.780308 1.56839 0.927808 1.14447 1.19036 0.831905C1.45291 0.519345 1.809 0.34375 2.18031 0.34375L5.54031 0.34375C5.72416 0.34375 5.90621 0.38686 6.07607 0.470617C6.24592 0.554375 6.40026 0.677141 6.53026 0.831905C6.66026 0.98667 6.76338 1.1704 6.83374 1.37261C6.9041 1.57482 6.94031 1.79155 6.94031 2.01042V7.39508C6.94188 7.58264 6.89594 7.76642 6.80848 7.92244C6.72103 8.07846 6.59611 8.19949 6.45003 8.26975C6.35142 8.31885 6.24556 8.34401 6.13867 8.34375ZM2.18031 1.01042C1.95753 1.01042 1.74387 1.11577 1.58634 1.30331C1.42881 1.49085 1.34031 1.7452 1.34031 2.01042V7.39508C1.34021 7.45063 1.35394 7.50496 1.37976 7.55122C1.40558 7.59748 1.44235 7.6336 1.4854 7.655C1.52846 7.6764 1.57587 7.68213 1.62166 7.67147C1.66745 7.6608 1.70956 7.63422 1.74267 7.59508L3.66431 5.32142C3.71677 5.25933 3.78774 5.22449 3.86171 5.22449C3.93568 5.22449 4.00665 5.25933 4.05911 5.32142L5.97851 7.59442C6.01162 7.63356 6.05372 7.66014 6.09951 7.6708C6.1453 7.68146 6.19272 7.67573 6.23577 7.65433C6.27883 7.63293 6.31559 7.59682 6.34142 7.55056C6.36724 7.5043 6.38097 7.44996 6.38087 7.39442V2.01042C6.38087 1.7452 6.29237 1.49085 6.13484 1.30331C5.97731 1.11577 5.76365 1.01042 5.54087 1.01042H2.18031Z"
                        fill="white"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_1739_68767">
                        <rect
                          width="6.72"
                          height="8"
                          fill="white"
                          transform="translate(0.5 0.34375)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
                <button
                  class="px-[4px] py-[4px] bg-[rgba(0,0,0,0.5)] rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="11"
                    height="12"
                    viewBox="0 0 13 13"
                    fill="none"
                  >
                    <g clip-path="url(#clip0_2676_73560)">
                      <path
                        d="M5.15933 9.40475C5.29863 9.54414 5.46403 9.65472 5.64608 9.73016C5.82813 9.8056 6.02326 9.84443 6.22033 9.84443C6.41739 9.84443 6.61252 9.8056 6.79457 9.73016C6.97663 9.65472 7.14203 9.54414 7.28133 9.40475L8.88683 7.79925C8.97291 7.70405 9.01908 7.57939 9.01579 7.45108C9.01249 7.32277 8.95998 7.20065 8.86913 7.10999C8.77828 7.01933 8.65604 6.96708 8.52772 6.96405C8.39941 6.96103 8.27485 7.00747 8.17983 7.09375L6.71683 8.55725L6.72033 0.84375C6.72033 0.711142 6.66765 0.583965 6.57388 0.490197C6.48011 0.396428 6.35294 0.34375 6.22033 0.34375V0.34375C6.08772 0.34375 5.96054 0.396428 5.86677 0.490197C5.77301 0.583965 5.72033 0.711142 5.72033 0.84375L5.71583 8.54775L4.26083 7.09375C4.16701 7 4.03979 6.94735 3.90715 6.9474C3.77452 6.94745 3.64733 7.00018 3.55358 7.094C3.45982 7.18782 3.40718 7.31504 3.40723 7.44768C3.40727 7.58031 3.46001 7.7075 3.55383 7.80125L5.15933 9.40475Z"
                        fill="white"
                      />
                      <path
                        d="M11.7207 8.34375C11.5881 8.34375 11.4609 8.39643 11.3671 8.4902C11.2734 8.58396 11.2207 8.71114 11.2207 8.84375V10.8437C11.2207 10.9764 11.168 11.1035 11.0743 11.1973C10.9805 11.2911 10.8533 11.3437 10.7207 11.3437H1.7207C1.58809 11.3437 1.46092 11.2911 1.36715 11.1973C1.27338 11.1035 1.2207 10.9764 1.2207 10.8437V8.84375C1.2207 8.71114 1.16802 8.58396 1.07426 8.4902C0.980488 8.39643 0.853311 8.34375 0.720703 8.34375C0.588095 8.34375 0.460918 8.39643 0.36715 8.4902C0.273382 8.58396 0.220703 8.71114 0.220703 8.84375L0.220703 10.8437C0.220703 11.2416 0.378738 11.6231 0.660043 11.9044C0.941347 12.1857 1.32288 12.3437 1.7207 12.3437H10.7207C11.1185 12.3437 11.5001 12.1857 11.7814 11.9044C12.0627 11.6231 12.2207 11.2416 12.2207 10.8437V8.84375C12.2207 8.71114 12.168 8.58396 12.0743 8.4902C11.9805 8.39643 11.8533 8.34375 11.7207 8.34375Z"
                        fill="white"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_2676_73560">
                        <rect
                          width="12"
                          height="12"
                          fill="white"
                          transform="translate(0.220703 0.34375)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                </button>
                <button
                  class="px-[4px] py-[4px] bg-[rgba(0,0,0,0.5)] rounded-md flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="11"
                    height="12"
                    viewBox="0 0 9 9"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M6.26751 2.34381H7.41484C7.85667 2.34381 8.21484 2.70198 8.21484 3.14381V3.9438C8.21484 4.28088 8.00638 4.56926 7.71135 4.68706C7.71266 4.7058 7.71333 4.72473 7.71333 4.74381C7.71333 4.80218 7.70694 4.86037 7.69428 4.91735L7.07206 7.71735C6.99072 8.08338 6.66607 8.34381 6.29111 8.34381H2.13284C1.75789 8.34381 1.43323 8.08338 1.35189 7.71735L0.729672 4.91735C0.712267 4.83903 0.706991 4.76084 0.712594 4.68474C0.420603 4.5655 0.214844 4.27868 0.214844 3.9438V3.14381C0.214844 2.70198 0.573016 2.34381 1.01484 2.34381H2.17303L3.06244 0.564985C3.16124 0.367393 3.40151 0.287303 3.5991 0.386099C3.79669 0.484895 3.87678 0.725164 3.77798 0.922756L3.06746 2.34381H5.37309L4.66254 0.922723C4.56375 0.725132 4.64384 0.484862 4.84143 0.386067C5.03902 0.287271 5.27929 0.367361 5.37809 0.564952L6.26751 2.34381ZM6.3992 3.50161C6.53928 3.43157 6.62031 3.29042 6.6204 3.14378H7.41931V3.94378H1.01931V3.14378H1.82013C1.82021 3.29043 1.90123 3.43159 2.04133 3.50164C2.23892 3.60044 2.47919 3.52035 2.57798 3.32276L2.66747 3.14378H5.77307L5.86254 3.32272C5.96134 3.52031 6.20161 3.6004 6.3992 3.50161ZM6.91632 4.7438H1.51362L2.13584 7.54378H6.2941L6.91632 4.7438Z"
                      fill="white"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </NuxtLink>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useApi } from '~/composables/custom-fetch-api/useApi'
import { useBehaviorTracker } from '~/composables/tracking/useTracker'
import { API } from '~/constants/apiEndpoints'
const { locale } = useI18n()
const props = defineProps<{
  section_id?: number
  content_id?: number
}>()
const hoverStart = ref(0)
const { sendEvent } = useBehaviorTracker()
const seriesDetail = async (
  section: string,
  subsection: string,
  categories: string,
  collection: string,
  slug_title: string
) => {
  console.log('Starting navigation...')
  await nextTick()
  const route = `/all-products/${section}/${subsection}/${categories}/${collection}/${slug_title}`

  try {
    await navigateTo(route)
    console.log('Navigation completed')
  } catch (error) {
    console.error('Navigation failed:', error)
  }
}
const trackClick = (section_id: number, content_id?: number) => {
  // sendEvent(1, {
  //   section_id,
  //   content_id,
  //   slug: useRoute().fullPath,
  //   ref: document.referrer || undefined,
  // })
}
const startHover = () => {
  hoverStart.value = Date.now()
}

const endHover = (target: string, section_id: number, content_id?: number) => {
  const duration = Date.now() - hoverStart.value

  // sendEvent(2, {
  //   section_id,
  //   content_id,
  //   slug: useRoute().fullPath,
  //   duration,
  //   ref: document.referrer || undefined,
  // })
}
const page = ref(1)
const rowPerPage = ref(10)
const items = Array(8).fill({
  image: null,
})
const carousel = ref<HTMLDivElement | null>(null)
function scrollLeft() {
  if (carousel.value) {
    carousel.value.scrollBy({ left: -300, behavior: 'smooth' })
  }
}
function scrollRight() {
  if (carousel.value) {
    carousel.value.scrollBy({ left: 300, behavior: 'smooth' })
  }
}
const { data: listImageSeries } = useApi<IImageSeries.ImageData>(
  () =>
    API.POST.GET_SERIES_CONTENT.replace(':type', 'web')
      .replace(':version', 'v1')
      .replace(':lang', locale.value),
  {
    query: {
      page: page.value,
      per_page: rowPerPage.value,
      section_id: props.section_id,
    },
    method: 'GET',
    immediate: true,
  }
)
console.log('listImageSeries', listImageSeries.value)

const videoRefs = ref<(HTMLVideoElement | null)[]>([])
const durations = reactive<number[]>([])
const isMuted = reactive<boolean[]>([])

const playVideo = (index: number) => {
  videoRefs.value[index]?.play()
  startHover()
}
const pauseVideo = (index: number) => {
  const video = videoRefs.value[index]
  if (video) {
    video.pause()
    video.currentTime = 0
  }
  endHover('product-card-in-detail-page', props.section_id!, props.content_id)
}

// Mute toggle
const toggleMute = (index: number) => {
  const video = videoRefs.value[index]
  if (video) {
    isMuted[index] = !isMuted[index]
    video.muted = isMuted[index]
  }
}
const logDuration = (event: Event, index: number) => {
  const video = event.target as HTMLVideoElement
  if (!isNaN(video.duration)) {
    durations[index] = video.duration
  }
}

const formatTime = (seconds: number) => {
  const m = Math.floor(8 / 60)
  const s = Math.floor(8 % 60)
  return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`
}
</script>

<style scoped>
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.nav-button {
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background-color: #eff1d9;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
  transition:
    transform 0.2s ease,
    background-color 0.2s ease;
}

.nav-button:hover {
  transform: scale(1.1);
  box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
}

.product-card {
  min-width: 300px;
}
</style>
